# WebGPU Shader Editor - Development Guidelines

## Architecture Pattern: Centralized State Management

### State Structure
- **Single Source of Truth**: All app state lives in `stores/app.js`
- **Action-Based Updates**: State mutations only through actions in `stores/actions.js`
- **Derived Selectors**: Components consume state via `stores/selectors.js`
- **Pure Components**: UI components are stateless, reactive to derived stores

### Data Flow Pattern
```
Component Event → Action Dispatch → Central State Update → Derived Store → Component Re-render
```

### State Domains
1. **Auth**: Authentication status, user info, loading states
2. **Navigation**: Current route, page type, parameters
3. **Shaders**: Shader lists, active shader, loading/error states
4. **Editor**: Active scripts, compilation state, console messages
5. **UI**: Modal states, notifications, temporary UI state

### Key Principles
- Components never directly mutate state
- All async operations go through actions
- Error handling centralized in actions
- Loading states managed consistently
- State updates are immutable

### File Organization
- `stores/app.js` - Central state store
- `stores/actions.js` - All state mutation logic
- `stores/selectors.js` - Derived state for components
- `stores/api.js` - API layer (unchanged)

### Migration Strategy
1. Create central app store
2. Migrate actions one domain at a time
3. Update components to use selectors
4. Remove old stores gradually